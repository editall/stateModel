(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i.viewmodel={}))})(this,function(i){"use strict";const s=()=>{};class n{#t;get parent(){return this.#t}parentAs(t){return this.#t instanceof t?this.#t:null}#e=s;get rerender(){return this.#e}beforeSet(t,e,r){}afterInit(){}init(t){let e=1;t instanceof n?(this.#t=t,this.#e=t.rerender):this.#e=()=>t(e++);const r=this.#e;Reflect.ownKeys(this).forEach(h=>{if(typeof h=="symbol"||h[0]=="_")return;let f=this[h];f instanceof n&&f.init(this),Object.defineProperty(this,h,{get:()=>f,set:a=>{this.beforeSet(h,f,a),f=a,r()}})}),this.afterInit()}}class o extends n{#t;constructor(...t){super(),this.#t=t}afterInit(){this.parent&&this.#t.forEach(t=>t instanceof n&&t.init(this.parent))}add(...t){return this.#t.push(...t),this.parent&&t.forEach(e=>e instanceof n&&e.init(this.parent)),this.rerender(),this}addAt(t,...e){return this.#t.splice(t,0,...e),this.parent&&e.forEach(r=>r instanceof n&&r.init(this.parent)),this.rerender(),this}remove(t){const e=this.#t.indexOf(t);return this.#t.splice(e,1),this.rerender(),this}removeAt(t,e=1){return this.#t.splice(t,e),this.rerender(),this}indexOf(t){return this.#t.indexOf(t)}map(t){return this.#t.map(t)}}function u(...d){return new o(...d)}i.ListModel=o,i.ViewModel=n,i.listVM=u,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
